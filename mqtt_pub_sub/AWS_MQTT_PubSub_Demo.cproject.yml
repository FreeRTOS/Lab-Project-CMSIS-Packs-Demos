# yaml-language-server: $schema=https://raw.githubusercontent.com/Open-CMSIS-Pack/devtools/schemas/projmgr/0.9.3/tools/projmgr/schemas/cproject.schema.json

project:

  defines:
    - MBEDTLS_CONFIG_FILE=\"aws_mbedtls_config.h\"
  
  add-paths:
    - ./config_files

  misc:
    - C*:
      - -Wno-macro-redefined
      - -Wno-pragma-pack
      - -Wno-parentheses-equality

  components:
    - component: ARM::CMSIS:RTOS2:FreeRTOS&Cortex-M

    - component: ARM::RTOS&FreeRTOS:Config&CMSIS RTOS2
    - component: ARM::RTOS&FreeRTOS:Core&Cortex-M
    - component: ARM::RTOS&FreeRTOS:Event Groups
    - component: ARM::RTOS&FreeRTOS:Heap&Heap_5
    - component: ARM::RTOS&FreeRTOS:Stream Buffer
    - component: ARM::RTOS&FreeRTOS:Timers

  groups:
    - group: Documentation
      files: 
        - file: ./README.md
    - group: main
      files:
        - file: ./app_main.c
        - file: ./mqtt_demo_mutual_auth.c
        - file: ./mqtt_demo_pub_sub.c
    - group: config_files
      files:
        - file: ./config_files/aws_mbedtls_config.h
        - file: ./config_files/core_mqtt_config.h
        - file: ./config_files/core_pkcs11_config.h
        - file: ./config_files/FreeRTOSIPConfig.h
        - file: ./config_files/iot_config.h
        - file: ./config_files/demo_config.h
  layers:
    - layer: ../common/logging/logging.clayer.yml
    - layer: ../common/mqtt_agent/mqtt_agent.clayer.yml
    - layer: ../common/mbedtls_alt/mbedtls_alt.clayer.yml
    - layer: ../Interface/mqtt_agent/freertos/Interface.clayer.yml
    
    - layer: ./Board/AVH_MPS2_Cortex-M7/Board.clayer.yml
      for-type: 
        - +AVH_MPS2_Cortex-M7
    - layer: ./Board/AVH_MPS3_Corstone-300/Board.clayer.yml
      for-type: 
        - +AVH_MPS3_Corstone-300
    - layer: ./Board/IMXRT1050-EVKB/Board.clayer.yml
      for-type: 
        - +IMXRT1050-EVKB
        - +IMXRT1050-EVKB_ESP8266
        - +IMXRT1050-EVKB_WizFi360

    - layer: ../common/Socket/VSocket/Socket.clayer.yml
      for-type: 
        - +AVH_MPS2_Cortex-M7
        - +AVH_MPS3_Corstone-300

    - layer: ../Interface/transport/IoT_Socket/Interface.clayer.yml
      for-type:
        - +AVH_MPS2_Cortex-M7
        - +AVH_MPS3_Corstone-300

    - layer: ../Interface/pkcs11/custom/Interface.clayer.yml
      for-type:
        - +AVH_MPS2_Cortex-M7
        - +AVH_MPS3_Corstone-300
  
